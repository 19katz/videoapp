{"ast":null,"code":"import _regeneratorRuntime from\"/Users/katherinezhang/twilio-video-react-hooks/react-frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/katherinezhang/twilio-video-react-hooks/react-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/katherinezhang/twilio-video-react-hooks/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import Lobby from'./Lobby';import Room from'./Room';var VideoChat=function VideoChat(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),roomName=_useState4[0],setRoomName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),token=_useState6[0],setToken=_useState6[1];var handleUsernameChange=useCallback(function(event){setUsername(event.target.value);},[]);var handleRoomNameChange=useCallback(function(event){setRoomName(event.target.value);},[]);var handleSubmit=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch('/login',{method:'POST',body:JSON.stringify({identity:username,room:roomName}),headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();});case 3:data=_context.sent;setToken(data.token);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[username,roomName]);var handleLogout=useCallback(function(event){setToken(null);},[]);var render;if(token){render=React.createElement(Room,{roomName:roomName,token:token,handleLogout:handleLogout});}else{render=React.createElement(Lobby,{username:username,roomName:roomName,handleUsernameChange:handleUsernameChange,handleRoomNameChange:handleRoomNameChange,handleSubmit:handleSubmit});}return render;};export default VideoChat;","map":{"version":3,"sources":["/Users/katherinezhang/twilio-video-react-hooks/react-frontend/src/VideoChat.js"],"names":["React","useState","useCallback","Lobby","Room","VideoChat","username","setUsername","roomName","setRoomName","token","setToken","handleUsernameChange","event","target","value","handleRoomNameChange","handleSubmit","preventDefault","fetch","method","body","JSON","stringify","identity","room","headers","then","res","json","data","handleLogout","render"],"mappings":"6aAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,WAA1B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,eACYJ,QAAQ,CAAC,EAAD,CADpB,wCACbK,QADa,eACHC,WADG,8BAEYN,QAAQ,CAAC,EAAD,CAFpB,yCAEbO,QAFa,eAEHC,WAFG,8BAGMR,QAAQ,CAAC,IAAD,CAHd,yCAGbS,KAHa,eAGNC,QAHM,eAKpB,GAAMC,CAAAA,oBAAoB,CAAGV,WAAW,CAAC,SAAAW,KAAK,CAAI,CAChDN,WAAW,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAFuC,CAErC,EAFqC,CAAxC,CAIA,GAAMC,CAAAA,oBAAoB,CAAGd,WAAW,CAAC,SAAAW,KAAK,CAAI,CAChDJ,WAAW,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAFuC,CAErC,EAFqC,CAAxC,CAIA,GAAME,CAAAA,YAAY,CAAGf,WAAW,0FAAC,iBAAMW,KAAN,2HAC/BA,KAAK,CAACK,cAAN,GAD+B,sBAEZC,CAAAA,KAAK,CAAC,QAAD,CAAW,CACjCC,MAAM,CAAE,MADyB,CAEjCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,QAAQ,CAAElB,QADS,CAEnBmB,IAAI,CAAEjB,QAFa,CAAf,CAF2B,CAMjCkB,OAAO,CAAE,CACP,eAAgB,kBADT,CANwB,CAAX,CAAL,CAShBC,IATgB,CASX,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EATQ,CAFY,QAEzBC,IAFyB,eAY/BnB,QAAQ,CAACmB,IAAI,CAACpB,KAAN,CAAR,CAZ+B,sDAAD,+DAa7B,CAACJ,QAAD,CAAWE,QAAX,CAb6B,CAAhC,CAeA,GAAMuB,CAAAA,YAAY,CAAG7B,WAAW,CAAC,SAAAW,KAAK,CAAI,CACxCF,QAAQ,CAAC,IAAD,CAAR,CACD,CAF+B,CAE7B,EAF6B,CAAhC,CAIA,GAAIqB,CAAAA,MAAJ,CACA,GAAItB,KAAJ,CAAW,CACTsB,MAAM,CACJ,oBAAC,IAAD,EAAM,QAAQ,CAAExB,QAAhB,CAA0B,KAAK,CAAEE,KAAjC,CAAwC,YAAY,CAAEqB,YAAtD,EADF,CAGG,CAJL,IAIW,CACTC,MAAM,CACJ,oBAAC,KAAD,EACG,QAAQ,CAAE1B,QADb,CAEG,QAAQ,CAAEE,QAFb,CAGG,oBAAoB,CAAEI,oBAHzB,CAIG,oBAAoB,CAAEI,oBAJzB,CAKG,YAAY,CAAEC,YALjB,EADF,CASD,CACD,MAAOe,CAAAA,MAAP,CACH,CAjDD,CAmDA,cAAe3B,CAAAA,SAAf","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport Lobby from './Lobby';\nimport Room from './Room';\n\nconst VideoChat = () => {\n    const [username, setUsername] = useState('');\n    const [roomName, setRoomName] = useState('');\n    const [token, setToken] = useState(null);\n    \n    const handleUsernameChange = useCallback(event => {\n      setUsername(event.target.value);\n    }, []);\n\n    const handleRoomNameChange = useCallback(event => {\n      setRoomName(event.target.value);\n    }, []);\n    \n    const handleSubmit = useCallback(async event => {\n      event.preventDefault();\n      const data = await fetch('/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          identity: username,\n          room: roomName\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json());\n      setToken(data.token);\n    }, [username, roomName]);\n    \n    const handleLogout = useCallback(event => {\n      setToken(null);\n    }, []);\n    \n    let render;\n    if (token) {\n      render = (\n        <Room roomName={roomName} token={token} handleLogout={handleLogout} />\n          );\n        } else {\n      render = (\n        <Lobby\n           username={username}\n           roomName={roomName}\n           handleUsernameChange={handleUsernameChange}\n           handleRoomNameChange={handleRoomNameChange}\n           handleSubmit={handleSubmit}\n        />\n      );\n    }\n    return render;\n};\n\nexport default VideoChat;\n"]},"metadata":{},"sourceType":"module"}